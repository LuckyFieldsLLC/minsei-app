import{r as x,j as e,O as g,C as p,T as j,e as f}from"./index-DWy39khm.js";const N=({isOpen:n,onClose:d,suggestions:l,onApply:i})=>{const[r,c]=x.useState([]);if(x.useEffect(()=>{n&&c(l)},[n,l]),!n)return null;const o=t=>{c(s=>s.some(a=>a.personId===t.personId&&a.activityDate===t.activityDate)?s.filter(a=>!(a.personId===t.personId&&a.activityDate===t.activityDate)):[...s,t])},m=()=>c(l),h=()=>c([]),b=()=>{const t=l.filter(s=>!r.some(a=>a.personId===s.personId&&a.activityDate===s.activityDate));i(r,t)},y=()=>{i([],l)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[55] flex justify-center items-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col",children:[e.jsxs("header",{className:"flex-shrink-0 flex justify-between items-center p-4 border-b",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(g,{className:"h-7 w-7 text-yellow-500"}),e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"AIからの更新提案"})]}),e.jsx("button",{onClick:d,className:"text-gray-500 hover:text-gray-800",children:e.jsx(p,{className:"h-6 w-6"})})]}),e.jsxs("main",{className:"flex-grow p-6 overflow-y-auto space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"活動履歴をAIが分析し、ステータス変更の可能性があるものを抽出しました。内容を確認し、適用したい項目を選択してください。"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("p",{className:"font-semibold",children:[l.length,"件の提案"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:m,className:"text-xs text-brand-blue hover:underline",children:"すべて選択"}),e.jsx("button",{onClick:h,className:"text-xs text-gray-600 hover:underline",children:"すべて解除"})]})]}),e.jsx("div",{className:"space-y-3 border rounded-lg p-3 max-h-[50vh] overflow-y-auto",children:l.length>0?l.map((t,s)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-yellow-50/50 rounded-md",children:[e.jsx("input",{type:"checkbox",checked:r.some(a=>a.personId===t.personId&&a.activityDate===t.activityDate),onChange:()=>o(t),className:"mt-1 h-4 w-4 text-brand-blue focus:ring-brand-blue border-gray-300 rounded","aria-labelledby":`suggestion-label-${s}`}),e.jsxs("div",{className:"flex-1",id:`suggestion-label-${s}`,children:[e.jsxs("p",{className:"font-bold text-gray-800",children:[t.personName,"様"]}),e.jsxs("p",{className:"text-sm mt-1",children:["ステータスを ",e.jsx("span",{className:"font-semibold text-red-700 bg-red-100 rounded px-1 py-0.5",children:t.suggestedStatus})," に変更"]}),e.jsxs("div",{className:"mt-2 p-2 border-l-2 border-gray-300",children:[e.jsxs("p",{className:"text-xs text-gray-500",children:[e.jsx("strong",{children:"根拠となった活動記録"})," (",new Date(t.activityDate).toLocaleDateString("ja-JP"),"):"]}),e.jsxs("blockquote",{className:"text-sm text-gray-700 italic mt-1",children:["「",t.activityContent,"」"]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[e.jsx("strong",{children:"AIの判断理由:"})," ",t.reasoning]})]})]})]},`${t.personId}-${t.activityDate}`)):e.jsx("p",{className:"text-gray-500 text-center p-4",children:"提案はありません。"})})]}),e.jsxs("footer",{className:"flex-shrink-0 flex justify-between items-center p-4 border-t bg-gray-50 rounded-b-lg",children:[e.jsxs("button",{onClick:y,className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-md transition-colors",children:[e.jsx(j,{className:"h-5 w-5 mr-2"}),"すべての提案を無視"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:d,className:"px-4 py-2 text-gray-700 bg-gray-200 hover:bg-gray-300 rounded-md",children:"あとで確認"}),e.jsxs("button",{onClick:b,disabled:r.length===0,className:"flex items-center px-4 py-2 bg-brand-blue text-white rounded-md hover:bg-blue-800 disabled:bg-gray-400",children:[e.jsx(f,{className:"h-5 w-5 mr-2"}),"選択した",r.length,"件を適用"]})]})]})]})})};export{N as default};
