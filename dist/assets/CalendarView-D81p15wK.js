import{r as N,j as n,Q as F,V as O,i as T,W as I}from"./index-DWy39khm.js";const f=(s,t,o)=>{const e=new Date(s,t,1),r=e.getDay(),i=r===1?0:r===0?1:8-r;return e.setDate(1+i+(o-1)*7),e},E=s=>Math.floor(20.8431+.242194*(s-1980)-Math.floor((s-1980)/4)),H=s=>Math.floor(23.2488+.242194*(s-1980)-Math.floor((s-1980)/4)),P=s=>{const t=new Map,o=i=>`${(i.getMonth()+1).toString().padStart(2,"0")}-${i.getDate().toString().padStart(2,"0")}`;t.set("01-01","元日"),t.set("02-11","建国記念の日"),t.set("02-23","天皇誕生日"),t.set("04-29","昭和の日"),t.set("05-03","憲法記念日"),t.set("05-04","みどりの日"),t.set("05-05","こどもの日"),t.set("08-11","山の日"),t.set("11-03","文化の日"),t.set("11-23","勤労感謝の日"),t.set(o(f(s,0,2)),"成人の日"),t.set(`03-${E(s)}`,"春分の日"),t.set(o(f(s,6,3)),"海の日"),t.set(o(f(s,8,3)),"敬老の日"),t.set(`09-${H(s)}`,"秋分の日"),t.set(o(f(s,9,2)),"スポーツの日");const e=new Map,r=Array.from(t.keys()).sort();for(const i of r){const[g,y]=i.split("-").map(Number),h=new Date(s,g-1,y);if(h.getDay()===0){let l=new Date(h);for(l.setDate(l.getDate()+1);t.has(o(l))||e.has(o(l));)l.setDate(l.getDate()+1);e.set(o(l),"振替休日")}}if(new Date(s,4,5).getDay()===0){const i=new Date(s,4,6),g=o(i);!t.has(g)&&!e.has(g)&&e.set(g,"振替休日")}return new Map([...t,...e])},V=s=>{const t=s.getFullYear(),o=s.getMonth()+1,e=s.getDate();if(t>2019||t===2019&&(o>4||o===5&&e>=1)){const r=t-2018;return`令和${r===1?"元":r}年`}if(t>1989||t===1989&&(o>1||o===1&&e>=8)){const r=t-1988;return`平成${r===1?"元":r}年`}if(t>1926||t===1926&&(o>11||o===12&&e>=25)){const r=t-1925;return`昭和${r===1?"元":r}年`}return`${t}年`},q=({events:s,onSelectEvent:t,onAddNewEvent:o})=>{const[e,r]=N.useState(new Date),i=N.useMemo(()=>P(e.getFullYear()),[e.getFullYear()]),g=new Date(e.getFullYear(),e.getMonth(),1),y=new Date(e.getFullYear(),e.getMonth()+1,0),h=new Date(g);h.setDate(h.getDate()-h.getDay());const l=new Date(y);l.setDate(l.getDate()+(6-l.getDay()));const w=[];let x=[],u=new Date(h);for(;u<=l;)x.push(new Date(u)),x.length===7&&(w.push(x),x=[]),u.setDate(u.getDate()+1);const b=a=>{r(new Date(e.getFullYear(),e.getMonth()+a,1))},j=(a,d)=>a.getFullYear()===d.getFullYear()&&a.getMonth()===d.getMonth()&&a.getDate()===d.getDate(),S=a=>j(a,new Date);return n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-lg shadow-md",children:[n.jsxs("header",{className:"flex justify-between items-center mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>b(-1),className:"p-2 rounded-full hover:bg-gray-100",children:n.jsx(F,{className:"h-6 w-6"})}),n.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 w-auto text-center whitespace-nowrap",children:[e.getFullYear(),"年 (",V(e),") ",e.getMonth()+1,"月"]}),n.jsx("button",{onClick:()=>b(1),className:"p-2 rounded-full hover:bg-gray-100",children:n.jsx(O,{className:"h-6 w-6"})})]}),n.jsxs("button",{onClick:()=>o(),className:"flex items-center gap-2 px-4 py-2 bg-brand-blue text-white rounded-md hover:bg-blue-800 shadow-sm transition-colors",children:[n.jsx(T,{className:"h-5 w-5"}),n.jsx("span",{className:"hidden sm:inline",children:"新しい予定を追加"})]})]}),n.jsxs("div",{className:"grid grid-cols-7 gap-px border-t border-l border-gray-200 bg-gray-200",children:[n.jsx("div",{className:"text-center py-2 bg-gray-50 text-xs font-semibold text-red-500",children:"日"}),["月","火","水","木","金"].map(a=>n.jsx("div",{className:"text-center py-2 bg-gray-50 text-xs font-semibold text-gray-600",children:a},a)),n.jsx("div",{className:"text-center py-2 bg-gray-50 text-xs font-semibold text-blue-500",children:"土"}),w.flat().map((a,d)=>{const k=s.filter(c=>j(new Date(c.start),a)),D=a.getMonth()===e.getMonth(),v=`${(a.getMonth()+1).toString().padStart(2,"0")}-${a.getDate().toString().padStart(2,"0")}`,p=i.get(v),$=a.getDay()===0,C=a.getDay()===6;let m="";return D?p||$?m="text-red-500":C&&(m="text-blue-500"):m="text-gray-400",n.jsxs("div",{onClick:()=>o(a),className:`p-1 sm:p-2 h-28 sm:h-32 flex flex-col ${D?"bg-white":"bg-gray-50"} overflow-hidden relative cursor-pointer hover:bg-gray-100 transition-colors`,children:[n.jsxs("div",{className:"flex-shrink-0",children:[n.jsx("time",{dateTime:a.toISOString().split("T")[0],className:`text-sm font-semibold ${S(a)?"bg-brand-blue text-white rounded-full w-6 h-6 flex items-center justify-center":m}`,children:a.getDate()}),p&&D&&n.jsx("p",{className:"text-[10px] text-red-500 truncate mt-0.5",children:p})]}),n.jsx("div",{className:"mt-1 flex-grow -mx-1 overflow-y-auto",children:k.map(c=>{const M=c.category?I[c.category]:{bg:"bg-blue-100",text:"text-blue-800"};return n.jsxs("button",{onClick:Y=>{Y.stopPropagation(),t(c)},className:`block w-full text-left text-xs p-1 mt-1 ${M.bg} ${M.text} rounded truncate hover:opacity-80`,children:[new Date(c.start).toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})," ",c.title]},c.id)})})]},d)})]})]})};export{q as default};
